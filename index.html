<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wordle 클론 (HTML 단일 파일)</title>
  <style>
    :root{
      --bg:#121213;
      --tile:#3a3a3c;
      --key:#818384;
      --key-text:#fff;
      --text:#e5e5e5;
      --correct:#6aaa64;
      --present:#c9b458;
      --absent:#3a3a3c;
      --border:#3a3a3c;
      --accent:#4c8bf5;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      background:var(--bg); color:var(--text); display:flex; min-height:100vh; flex-direction:column; align-items:center;
    }
    header{
      width:100%; max-width:520px; padding:12px 16px; display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid #2a2a2a; position:sticky; top:0; background:rgba(18,18,19,0.9); backdrop-filter:saturate(120%) blur(10px);
    }
    header h1{margin:0; font-size:1.25rem; letter-spacing:0.04em}
    .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    select, button{
      background:#222; color:var(--text); border:1px solid #2f2f2f; padding:8px 10px; border-radius:8px; cursor:pointer; font-size:0.95rem;
    }
    button.primary{background:var(--accent); border-color:var(--accent); color:#fff}
    main{width:100%; max-width:520px; padding:16px; display:flex; flex-direction:column; gap:16px; align-items:center}
    .board{
      width:100%; max-width:420px; display:grid; grid-template-rows:repeat(6,1fr); gap:8px; margin-top:8px;
    }
    .row{display:grid; grid-template-columns:repeat(5,1fr); gap:8px}
    .tile{
      width:100%; aspect-ratio:1/1; border:2px solid var(--border); display:flex; align-items:center; justify-content:center;
      font-weight:700; font-size:1.6rem; text-transform:uppercase; user-select:none; border-radius:6px; background:#121213;
      transition: transform 0.2s;
    }
    .tile.filled{border-color:#565758}
    .tile.reveal{animation:flip 600ms ease forwards}
    .row.shake{animation:shake 400ms ease-in-out}

    @keyframes flip{
      0%{transform:rotateX(0); background:#121213}
      49%{transform:rotateX(90deg); background:#121213; color:transparent}
      51%{transform:rotateX(90deg)}
      100%{transform:rotateX(0)}
    }
    @keyframes shake {
      10%, 90% { transform: translateX(-2px); }
      20%, 80% { transform: translateX(4px); }
      30%, 50%, 70% { transform: translateX(-6px); }
      40%, 60% { transform: translateX(6px); }
    }

    .tile.correct{background:var(--correct); border-color:var(--correct)}
    .tile.present{background:var(--present); border-color:var(--present)}
    .tile.absent{background:var(--absent); border-color:var(--absent)}
    
    .keyboard{display:grid; grid-template-rows:repeat(3,1fr); gap:8px; width:100%; max-width:520px; margin-top:8px}
    .keyrow{display:flex; gap:6px; justify-content:center}
    .key{
      background:var(--key); color:var(--key-text); border:none; border-radius:6px; padding:12px 8px; font-weight:600; cursor:pointer;
      min-width:32px; flex:0 0 auto; user-select:none; transition: transform 0.1s, background-color 0.1s;
    }
    .key:active{ transform: scale(0.95); background-color: #565758; }
    .key.wide{min-width:64px}
    .key.correct{background:var(--correct)}
    .key.present{background:var(--present)}
    .key.absent{background:#3a3a3c}
    
    .toast{
      position:fixed; top:72px; left:50%; transform:translateX(-50%); background:#333; color:#fff; padding:10px 14px; border-radius:8px;
      opacity:0; pointer-events:none; transition:opacity .2s, transform .2s; z-index:5; font-weight:600;
    }
    .toast.show{opacity:1; transform:translate(-50%, 0)}
    .footer{
      display:flex; gap:8px; align-items:center; justify-content:center; flex-wrap:wrap; margin:12px 0 24px;
    }
    .small{opacity:0.85; font-size:0.9rem}
    .answer{
      font-weight:700; color:#fff; background:#1f1f1f; padding:4px 8px; border-radius:6px; margin-left:6px; text-transform:uppercase;
    }
    @media (max-width:420px){
      header h1{font-size:1.05rem}
      .tile{font-size:1.35rem}
      .key{padding:10px 6px}
    }
  </style>
</head>
<body>
  <header>
    <h1>WORDLE 클론</h1>
    <div class="controls">
      <label class="small" for="mode">모드</label>
      <select id="mode" title="게임 모드">
        <option value="daily" selected>일일 모드</option>
        <option value="random">랜덤 모드</option>
      </select>
      <button id="new" class="primary">새 게임</button>
    </div>
  </header>

  <main>
    <div class="small" id="subtext">5글자 영어 단어를 6번 안에 맞혀보세요.</div>
    <div id="board" class="board" aria-label="게임 보드"></div>
    <div class="keyboard" aria-label="화상 키보드"></div>
    <div class="footer">
      <button id="share">결과 공유</button>
      <button id="reveal">정답 보기</button>
      <span id="answer" class="answer" style="display:none;"></span>
    </div>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // ====== 단어 목록 ======
    const ANSWERS = [
      "about","other","which","there","their","would","could","right","great","small",
      "every","think","place","world","again","house","point","large","young","story",
      "today","under","heart","water","after","thing","sound","light","night","write",
      "voice","happy","sweet","match","green","brown","plant","short","among","skill",
      "title","bring","carry","group","music","paper","model","train","quick","smart",
      "pride","quiet","rough","touch","smile","angle","reach","count","dream","clear",
      "share","learn","build","space","shape","break","glass","storm","north","south",
      "east","west","river","mount","beach","field","plain","solid","align","truth",
      "novel","ratio","chart","grain","metal","fiber","pilot","track","frame","scope"
    ];
    const VALID_GUESSES = [...new Set([...ANSWERS, ...[
        "aback","abase","abate","abbey","abbot","abhor","abide","abled","abode","abort","about","above","abuse","abyss","acorn",
        "acrid","actor","acute","adage","adapt","adept","admin","admit","adobe","adopt","adore","adorn","adult","affix","afire",
        "afoot","afoul","after","again","agape","agate","agent","agile","aging","aglow","agony","agora","agree","ahead","aider",
        "aisle","alarm","album","alert","algae","alibi","alien","align","alike","alive","allay","alley","allot","allow","alloy",
        "aloft","alone","along","aloof","aloud","alpha","altar","alter","amass","amaze","amber","amble","amend","amiss","amity",
        "among","ample","amply","amuse","angel","anger","angle","angry","angst","anime","ankle","annex","annoy","annul","anode",
        "antic","anvil","aorta","apart","aphid","aping","apnea","apple","apply","apron","aptly","arbor","ardor","arena","argue",
        "arise","armor","aroma","arose","array","arrow","arson","artsy","ascot","ashen","aside","askew","assay","asset","atoll",
        "atone","attic","audio","audit","augur","aunty","avail","avert","avian","avoid","await","awake","award","aware","awash",
        "awful","awoke","axial","axiom","axion","azure","bacon","badge","badly","bagel","baggy","baker","baler","balmy","banal",
        "banjo","barge","baron","basal","basic","basil","basin","basis","baste","batch","bathe","baton","batty","bawdy","bayou",
        "beach","beady","beard","beast","beech","beefy","befit","began","begat","beget","begin","begun","being","belch","belie",
        "belle","belly","below","bench","beret","berry","berth","beset","betel","bevel","bezel","bible","bicep","biddy","bigot",
        "bilge","billy","binge","bingo","biome","birch","birth","bison","bitty","black","blade","blame","bland","blank","blare",
        "blast","blaze","bleak","bleat","bleed","bleep","blend","bless","blimp","blind","blink","bliss","blitz","bloat","block",
        "bloke","blond","blood","bloom","blown","bluer","bluff","blunt","blurb","blurt","blush","board","boast","bobby","boney",
        "bongo","bonus","booby","boost","booth","booty","booze","boozy","borax","borne","bosom","bossy","botch","bough","boule",
        "bound","bowel","boxer","brace","braid","brain","brake","brand","brash","brass","brave","bravo","brawl","brawn","bread",
        "break","breed","briar","bribe","brick","bride","brief","brine","bring","brink","briny","brisk","broad","broil","broke",
        "brood","brook","broom","broth","brown","brunt","brush","brute","buddy","budge","buggy","bugle","build","built","bulge",
        "bulky","bully","bunch","bunny","burly","burnt","burst","bused","bushy","butch","butte","buxom","buyer","bylaw","cabal",
        "cabby","cabin","cable","cacao","cache","cacti","caddy","cadet","cagey","cairn","camel","cameo","canal","candy","canny",
        "canoe","canon","caper","caput","carat","cargo","carol","carry","carve","caste","catch","cater","catty","caulk","cause",
        "cavil","cease","cedar","cello","chafe","chaff","chain","chair","chalk","champ","chant","chaos","chard","charm","chart",
        "chase","chasm","cheap","cheat","check","cheek","cheer","chess","chest","chick","chide","chief","child","chili","chill",
        "chime","china","chirp","chock","choir","choke","chord","chore","chose","chuck","chump","chunk","churn","chute","cider",
        "cigar","cinch","circa","civic","civil","clack","claim","clamp","clang","clank","clash","clasp","class","clean","clear",
        "cleat","cleft","clerk","click","cliff","climb","cling","clink","cloak","clock","clone","close","cloth","cloud","clout",
        "clove","clown","cluck","clued","clump","clung","coach","coast","cobra","cocoa","colon","color","comet","comfy","comic",
        "comma","conch","condo","conic","copse","coral","corer","corny","couch","cough","could","count","coupe","court","coven",
        "cover","covet","covey","cower","coyly","crack","craft","cramp","crane","crank","crash","crass","crate","crave","crawl",
        "craze","crazy","creak","cream","credo","creed","creek","creep","creme","crepe","crept","cress","crest","crick","cried",
        "crier","crime","crimp","crisp","croak","crock","crone","crony","crook","cross","croup","crowd","crown","crude","cruel",
        "crumb","crump","crush","crust","crypt","cubic","cumin","curio","curly","curry","curse","curve","curvy","cutie","cyber",
        "cycle","cynic","daddy","daily","dairy","daisy","dally","dance","dandy","datum","daunt","dealt","death","debar","debit",
        "debug","debut","decal","decay","decor","decoy","decry","defer","deign","deity","delay","delta","delve","demon","demur",
        "denim","dense","depot","depth","derby","deter","detox","deuce","devil","diary","dicey","digit","dilly","dimly","diner",
        "dingo","dingy","diode","dirge","dirty","disco","ditch","ditto","ditty","diver","dizzy","dodge","dodgy","dogma","doing",
        "dolly","donor","donut","dopey","doubt","dough","dowdy","dowel","downy","dowry","dozen","draft","drain","drake","drama",
        "drank","drape","drawl","drawn","dread","dream","dress","dried","drier","drift","drill","drink","drive","droit","droll",
        "drone","drool","droop","dross","drove","drown","druid","drunk","dryer","dryly","duchy","dully","dummy","dumpy","dunce",
        "dusky","dusty","dutch","duvet","dwarf","dwell","dwelt","dying","eager","eagle","early","earth","easel","eaten","eater",
        "ebony","eclat","edict","edify","eerie","egret","eight","eject","eking","elate","elbow","elder","elect","elegy","elfin",
        "elide","elite","elope","elude","email","embed","ember","emcee","empty","enact","endow","enema","enemy","enjoy","ennui",
        "ensue","enter","entry","envoy","epoch","epoxy","equal","equip","erase","erect","erode","error","erupt","essay","ester",
        "ether","ethic","ethos","etude","evade","event","every","evict","evoke","exact","exalt","excel","exert","exile","exist",
        "expel","extol","extra","exult","eying","fable","facet","faint","fairy","faith","false","fancy","fanny","farce","fatal",
        "fatty","fault","fauna","favor","feast","fecal","feign","fella","felon","femme","femur","fence","feral","ferry","fetal",
        "fetch","fetid","fetus","fever","fewer","fiber","fibre","ficus","field","fiend","fiery","fifth","fifty","fight","filer",
        "filet","filly","filmy","filth","final","finch","finer","first","fishy","fixer","fizzy","fjord","flack","flail","flair",
        "flake","flaky","flame","flank","flare","flash","flask","fleck","fleet","flesh","flick","flier","fling","flint","flirt",
        "float","flock","flood","floor","flora","floss","flour","flout","flown","fluff","fluid","fluke","flume","flung","flunk",
        "flush","flute","flyer","foamy","focal","focus","foggy","foist","folio","folly","foray","force","forge","forgo","forte",
        "forth","forty","forum","found","foyer","frail","frame","frank","fraud","freak","freed","freer","fresh","friar","fried",
        "frill","frisk","fritz","frock","frond","front","frost","froth","frown","froze","fruit","fudge","fugue","fully","fungi",
        "funky","funny","furor","furry","fussy","fuzzy","gaffe","gaily","gamer","gamma","gamut","gassy","gaudy","gauge","gaunt",
        "gauze","gavel","gawky","gayer","gayly","gazer","gecko","geeky","geese","genie","genre","ghost","ghoul","giant","giddy",
        "gipsy","girly","girth","given","giver","glade","gland","glare","glass","glaze","gleam","glean","glide","glint","gloat",
        "globe","gloom","glory","gloss","glove","glyph","gnash","gnome","godly","going","golem","golly","gonad","goner","goody",
        "gooey","goofy","goose","gorge","gouge","gourd","grace","grade","graft","grail","grain","grand","grant","grape","graph",
        "grasp","grass","grate","grave","gravy","graze","great","greed","green","greet","grief","grill","grime","grimy","grind",
        "gripe","groan","groin","groom","grope","gross","group","grout","grove","growl","grown","gruel","gruff","grunt","guard",
        "guava","guess","guest","guide","guild","guile","guilt","guise","gulch","gully","gumbo","gummy","guppy","gusto","gusty",
        "gypsy","habit","hairy","halve","handy","happy","hardy","harem","harpy","harry","harsh","haste","hasty","hatch","hater",
        "haunt","haute","haven","havoc","hazel","heady","heard","heart","heath","heave","heavy","hedge","hefty","heist","helix",
        "hello","hence","heron","hilly","hinge","hippo","hippy","hitch","hoard","hobby","hoist","holly","homer","honey","honor",
        "horde","horny","horse","hotel","hotly","hound","house","hovel","hover","howdy","human","humid","humor","humph","humus",
        "hunch","hunky","hurry","husky","hussy","hutch","hydro","hyena","hymen","hyper","icily","icing","ideal","idiom","idiot",
        "idler","idyll","igloo","iliac","image","imbue","impel","imply","inane","inbox","incur","index","inept","inert","infer",
        "ingot","inlay","inlet","inner","input","inter","intro","ionic","irate","irony","islet","issue","itchy","ivory","jaunt",
        "jazzy","jelly","jerky","jetty","jewel","jiffy","joint","joist","joker","jolly","joust","judge","juice","juicy","jumbo",
        "jumpy","junta","junto","juror","kappa","karma","kayak","kebab","khaki","kinky","kiosk","kitty","knack","knave","knead",
        "kneed","kneel","knelt","knife","knock","knoll","known","koala","krill","label","labor","laden","ladle","lager","lance",
        "lanky","lapel","lapse","large","larva","lasso","latch","later","lathe","latte","laugh","layer","leach","leafy","leaky",
        "leant","leapt","learn","lease","leash","least","leave","ledge","leech","leery","lefty","legal","leggy","lemon","lemur",
        "leper","level","lever","libel","liege","light","liken","lilac","limbo","limit","linen","liner","lingo","lipid","lithe",
        "liver","livid","llama","loamy","loath","lobby","local","locus","lodge","lofty","logic","login","loopy","loose","lorry",
        "loser","louse","lousy","lover","lower","lowly","loyal","lucid","lucky","lumen","lumpy","lunar","lunch","lunge","lupus",
        "lurch","lurid","lusty","lying","lymph","lynch","lyric","macaw","macho","macro","madam","madly","mafia","magic","magma",
        "maize","major","maker","mambo","mamma","mammy","manga","mange","mango","mangy","mania","manic","manly","manor","maple",
        "march","marry","marsh","mason","masse","match","matey","mauve","maxim","maybe","mayor","mealy","meant","meaty","mecca",
        "medal","media","medic","melee","melon","mercy","merge","merit","merry","metal","meter","metro","micro","midge","midst",
        "might","milky","mimic","mince","miner","minim","minor","minty","minus","mirth","miser","missy","mocha","modal","model",
        "modem","mogul","moist","molar","moldy","money","month","moody","moose","moral","moron","morph","mossy","motel","motif",
        "motor","motto","moult","mound","mount","mourn","mouse","mouth","mover","movie","mower","mucky","mucus","muddy","mulch",
        "mummy","munch","mural","murky","mushy","music","musky","musty","myrrh","nadir","naive","nanny","nasal","nasty","natal",
        "naval","navel","needy","neigh","nerdy","nerve","never","newer","newly","nicer","niche","niece","night","ninja","ninny",
        "ninth","noble","nobly","noise","noisy","nomad","noose","north","nosey","notch","novel","nudge","nurse","nutty","nylon",
        "nymph","oaken","obese","occur","ocean","octal","octet","odder","oddly","offal","offer","often","olden","older","olive",
        "ombre","omega","onion","onset","opera","opine","opium","optic","orbit","order","organ","other","otter","ought","ounce",
        "outdo","outer","outgo","ovary","ovate","overt","ovine","ovoid","owing","owner","oxide","ozone","paddy","pagan","paint",
        "paler","palsy","panel","panic","pansy","papal","paper","parer","parka","parry","parse","party","pasta","paste","pasty",
        "patch","patio","patsy","patty","pause","payee","payer","peace","peach","pearl","pecan","pedal","penal","pence","penne",
        "penny","perch","peril","perky","pesky","pesto","petal","petty","phase","phone","phony","photo","piano","picky","piece",
        "piety","piggy","pilot","pinch","piney","pinky","pinto","piper","pique","pitch","pithy","pivot","pixel","pixie","pizza",
        "place","plaid","plain","plait","plane","plank","plant","plate","plaza","plead","pleat","plied","plier","pluck","plumb",
        "plume","plump","plunk","plush","poesy","point","poise","poker","polar","polka","polyp","pooch","poppy","porch","poser",
        "posit","posse","pouch","pound","pouty","power","prank","prawn","preen","press","price","prick","pride","pried","prime",
        "primo","print","prior","prism","privy","prize","probe","prone","prong","proof","prose","proud","prove","prowl","proxy",
        "prude","prune","psalm","pubic","pudgy","puffy","pulpy","pulse","punch","pupal","pupil","puppy","puree","purer","purge",
        "purse","pushy","putty","pygmy","quack","quail","quake","qualm","quark","quart","quash","quasi","queen","queer","quell",
        "query","quest","queue","quick","quiet","quill","quilt","quirk","quite","quota","quote","quoth","rabbi","rabid","racer",
        "radar","radii","radio","rainy","raise","rajah","rally","ralph","ramen","ranch","randy","range","rapid","rarer","raspy",
        "ratio","ratty","raven","rayon","razor","reach","react","ready","realm","rearm","rebar","rebel","rebus","rebut","recap",
        "recur","recut","reedy","refer","refit","regal","rehab","reign","relax","relay","relic","remit","renal","renew","repay",
        "repel","reply","rerun","reset","resin","retch","retro","retry","reuse","revel","revue","rhino","rhyme","rider","ridge",
        "rifle","right","rigid","rigor","rinse","ripen","riper","risen","riser","risky","rival","river","rivet","roach","roast",
        "robin","robot","rocky","rodeo","roger","rogue","roomy","roost","rotor","rouge","rough","round","rouse","route","rover",
        "rowdy","rower","royal","ruddy","ruder","rugby","ruler","rumba","rumor","rupee","rural","rusty","sadly","safer","saint",
        "salad","sally","salon","salsa","salty","salve","salvo","sandy","saner","sappy","sassy","satin","satyr","sauce","saucy",
        "sauna","saute","savor","savoy","savvy","scald","scale","scalp","scaly","scamp","scant","scare","scarf","scary","scene",
        "scent","scion","scoff","scold","scone","scoop","scope","score","scorn","scour","scout","scowl","scram","scrap","scree",
        "screw","scrub","scrum","scuba","sedan","seedy","segue","seize","semen","sense","sepia","serif","serum","serve","setup",
        "seven","sever","sewer","shack","shade","shady","shaft","shake","shaky","shale","shall","shalt","shame","shank","shape",
        "shard","share","shark","sharp","shave","shawl","shear","sheen","sheep","sheer","sheet","sheik","shelf","shell","shied",
        "shift","shine","shiny","shire","shirk","shirt","shoal","shock","shone","shook","shoot","shore","shorn","short","shout",
        "shove","shown","showy","shrew","shrub","shrug","shuck","shunt","shush","shyly","siege","sieve","sight","sigma","silky",
        "silly","since","sinew","singe","siren","sissy","sixth","sixty","skate","skier","skiff","skill","skimp","skirt","skulk",
        "skull","skunk","slack","slain","slang","slant","slash","slate","slave","sleek","sleep","sleet","slept","slice","slick",
        "slide","slime","slimy","sling","slink","sloop","slope","slosh","sloth","slump","slung","slunk","slurp","slush","slyly",
        "smack","small","smart","smash","smear","smell","smelt","smile","smirk","smite","smith","smock","smoke","smoky","smote",
        "snack","snail","snake","snaky","snare","snarl","sneak","sneer","snide","sniff","snipe","snoop","snore","snort","snout",
        "snowy","snuck","snuff","soapy","sober","soggy","solar","solid","solve","sonar","sonic","sooth","sooty","sorry","sound",
        "south","sower","space","spade","spank","spare","spark","spasm","spawn","speak","spear","speck","speed","spell","spelt",
        "spend","spent","sperm","spice","spicy","spied","spiel","spike","spiky","spill","spilt","spine","spiny","spire","spite",
        "splat","split","spoil","spoke","spoof","spook","spool","spoon","spore","sport","spout","spray","spree","sprig","spunk",
        "spurn","spurt","squad","squat","squib","stack","staff","stage","staid","stain","stair","stake","stale","stalk","stall",
        "stamp","stand","stank","stare","stark","start","stash","state","stave","stead","steak","steal","steam","steed","steel",
        "steep","steer","stein","stern","stick","stiff","still","stilt","sting","stink","stint","stock","stoic","stoke","stole",
        "stomp","stone","stony","stood","stool","stoop","store","stork","storm","story","stout","stove","strap","straw","stray",
        "strip","strut","stuck","study","stuff","stump","stung","stunk","stunt","style","suave","sugar","suing","suite","sulky",
        "sully","sumac","sunny","super","surer","surge","surly","sushi","swami","swamp","swarm","swash","swath","swear","sweat",
        "sweep","sweet","swell","swept","swift","swill","swine","swing","swirl","swish","swoon","swoop","sword","swore","sworn",
        "swung","synod","syrup","tabby","table","taboo","tacit","tacky","taffy","taint","taken","taker","tally","talon","tamer",
        "tango","tangy","taper","tapir","tardy","tarot","taste","tasty","tatty","taunt","tawny","teach","teary","tease","teddy",
        "teeth","tempo","tenet","tenor","tense","tenth","tepee","tepid","terra","terse","testy","thank","theft","their","theme",
        "there","these","theta","thick","thief","thigh","thing","think","third","thong","thorn","those","three","threw","throb",
        "throw","thrum","thumb","thump","thyme","tiara","tibia","tidal","tiger","tight","tilde","timer","timid","tipsy","titan",
        "tithe","title","toast","today","toddy","token","tonal","tonga","tonic","tooth","topaz","topic","torch","torso","torus",
        "total","totem","touch","tough","towel","tower","toxic","toxin","trace","track","tract","trade","trail","train","trait",
        "tramp","trash","trawl","tread","treat","trend","triad","trial","tribe","trice","trick","tried","tripe","trite","troll",
        "troop","trope","trout","trove","truce","truck","truer","truly","trump","trunk","truss","trust","truth","tryst","tubal",
        "tuber","tulip","tulle","tumor","tunic","turbo","tutor","twang","tweak","tweed","tweet","twice","twine","twirl","twist",
        "twixt","tying","udder","ulcer","ultra","umbra","uncle","uncut","under","undid","undue","unfed","unfit","unify","union",
        "unite","unity","unlit","unmet","unset","untie","until","unwed","unzip","upper","upset","urban","urine","usage","usher",
        "using","usual","usurp","utile","utter","vague","valet","valid","valor","value","valve","vapid","vapor","vault","vaunt",
        "vegan","venom","venue","verge","verse","verso","verve","vicar","video","vigil","vigor","villa","vinyl","viola","viper",
        "viral","virus","visit","visor","vista","vital","vivid","vixen","vocal","vodka","vogue","voice","voila","vomit","voter",
        "vouch","vowel","vying","wacky","wafer","wager","wagon","waist","waive","waltz","warty","waste","watch","water","waver",
        "waxen","weary","weave","wedge","weedy","weigh","weird","welch","welsh","wench","whack","whale","wharf","wheat","wheel",
        "whelp","where","which","whiff","while","whine","whiny","whirl","whisk","white","whole","whoop","whose","widen","wider",
        "widow","width","wield","wight","willy","wimpy","wince","winch","windy","wiser","wispy","witch","witty","woken","woman",
        "women","woody","wooer","wooly","woozy","wordy","world","worry","worse","worst","worth","would","wound","woven","wrack",
        "wrath","wreak","wreck","wrest","wring","wrist","write","wrong","wrote","wrung","wryly","yacht","yearn","yeast","yield",
        "young","youth","zebra","zesty","zonal"
    ]]]];

    // ====== 전역 상태 ======
    const STORAGE_KEY_PREFIX = "wordle-clone-state-";
    const ROWS = 6, COLS = 5;
    let answer = "", grid = [], statuses = [], keyboardState = {};
    let currentRow = 0, currentCol = 0;
    let gameOver = false, isAnimating = false, revealConfirm = false;

    // ====== DOM ======
    const boardEl = document.getElementById("board");
    const keyboardEl = document.querySelector(".keyboard");
    const toastEl = document.getElementById("toast");
    const modeEl = document.getElementById("mode");
    const newBtn = document.getElementById("new");
    const shareBtn = document.getElementById("share");
    const revealBtn = document.getElementById("reveal");
    const answerBadge = document.getElementById("answer");
    const subtextEl = document.getElementById("subtext");

    // ====== 유틸리티 ======
    function showToast(msg, ms = 1200) {
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toastEl.classList.remove("show"), ms);
    }
    function shakeRow(r) {
      if (boardEl.children[r]) {
        boardEl.children[r].classList.add('shake');
        setTimeout(() => boardEl.children[r].classList.remove('shake'), 420);
      }
    }
    function getTodayKey() {
      const now = new Date();
      return `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}`;
    }

    // ====== 상태 저장/복원 (localStorage) ======
    function saveState() {
      if (modeEl.value !== 'daily') return; // 일일 모드만 저장
      const state = {
        answer, grid, statuses, keyboardState,
        currentRow, gameOver
      };
      localStorage.setItem(STORAGE_KEY_PREFIX + getTodayKey(), JSON.stringify(state));
    }
    function loadState() {
      if (modeEl.value !== 'daily') return false;
      const raw = localStorage.getItem(STORAGE_KEY_PREFIX + getTodayKey());
      if (!raw) return false;
      try {
        const state = JSON.parse(raw);
        const todayAnswer = pickAnswer('daily');
        // 오늘 날짜의 저장된 게임인지 확인
        if (state.answer === todayAnswer) {
          answer = state.answer; grid = state.grid; statuses = state.statuses;
          keyboardState = state.keyboardState; currentRow = state.currentRow;
          gameOver = state.gameOver;
          currentCol = grid[currentRow]?.findIndex(c => c === '') ?? 0;
          if (currentCol === -1) currentCol = COLS; // 현재 행이 꽉 찼을 경우
          return true;
        }
      } catch {
        return false;
      }
      return false;
    }
    
    // ====== 렌더링 ======
    function buildBoard() {
      boardEl.innerHTML = "";
      for (let r = 0; r < ROWS; r++) {
        const row = document.createElement("div");
        row.className = "row";
        for (let c = 0; c < COLS; c++) {
          const tile = document.createElement("div");
          tile.className = "tile";
          tile.id = `tile-${r}-${c}`;
          row.appendChild(tile);
        }
        boardEl.appendChild(row);
      }
    }
    function buildKeyboard() {
      keyboardEl.innerHTML = "";
      const rows = [
        "QWERTYUIOP".split(""),
        "ASDFGHJKL".split(""),
        ["Enter"].concat("ZXCVBNM".split("")).concat(["←"])
      ];
      rows.forEach((keys) => {
        const row = document.createElement("div");
        row.className = "keyrow";
        keys.forEach(k => {
          const btn = document.createElement("button");
          btn.className = "key";
          btn.textContent = k;
          const keyId = (k === "←") ? "Backspace" : k;
          if (keyId === "Enter" || keyId === "Backspace") btn.classList.add("wide");
          btn.setAttribute("data-key", keyId);
          btn.setAttribute("aria-label", keyId);
          btn.addEventListener("click", () => onVirtualKey(keyId));
          row.appendChild(btn);
        });
        keyboardEl.appendChild(row);
      });
    }
    function renderBoard() {
      for (let r = 0; r < ROWS; r++) {
        for (let c = 0; c < COLS; c++) {
          const tile = document.getElementById(`tile-${r}-${c}`);
          if(!tile) continue;
          const ch = grid[r]?.[c] || "";
          const st = statuses[r]?.[c] || "";
          tile.textContent = ch.toUpperCase();
          tile.classList.toggle("filled", !!ch);
          tile.classList.remove("correct", "present", "absent", "reveal");
          if (st) tile.classList.add(st);

          const statusLabel = st === "correct" ? "정답 위치" : st === "present" ? "다른 위치에 있음" : st === "absent" ? "단어에 없음" : "비어있음";
          tile.setAttribute("aria-label", `행 ${r+1} 열 ${c+1}, ${ch ? ch.toUpperCase() : "글자"} ${statusLabel}`);
        }
      }
    }
    function renderKeyboard() {
      document.querySelectorAll(".key").forEach(btn => {
        const k = btn.getAttribute("data-key");
        const letter = k.length === 1 ? k.toLowerCase() : k;
        btn.classList.remove("correct", "present", "absent");
        if (keyboardState[letter]) {
          btn.classList.add(keyboardState[letter]);
        }
      });
    }
    function setAnswerBadge(show = false) {
      answerBadge.style.display = show ? "inline-block" : "none";
      if(show) answerBadge.textContent = answer;
    }
    function updateUI() {
      renderBoard();
      renderKeyboard();
      setAnswerBadge(gameOver && grid[currentRow-1]?.join('') !== answer);
    }
    
    // ====== 게임 로직 ======
    function pickAnswer(mode) {
        if (mode === "daily") {
            const epoch = new Date(2021, 5, 19);
            const now = new Date();
            now.setHours(0, 0, 0, 0);
            const diff = Math.floor((now - epoch) / 86400000);
            return ANSWERS[((diff % ANSWERS.length) + ANSWERS.length) % ANSWERS.length];
        } else {
            return ANSWERS[Math.floor(Math.random() * ANSWERS.length)];
        }
    }
    function newGame() {
      isAnimating = false;
      gameOver = false;
      revealConfirm = false;
      
      const loaded = loadState();
      
      if (!loaded) {
          answer = pickAnswer(modeEl.value);
          grid = Array.from({ length: ROWS }, () => Array(COLS).fill(""));
          statuses = Array.from({ length: ROWS }, () => Array(COLS).fill(""));
          keyboardState = {};
          currentRow = 0;
          currentCol = 0;
      }
      
      subtextEl.textContent = modeEl.value === "daily" ? "일일 모드: 오늘의 단어가 정해져 있어요." : "랜덤 모드: 매번 새로운 단어가 등장해요.";
      updateUI();
      if (!loaded) saveState();
    }
    function onVirtualKey(k) {
      const key = (k === "Backspace") ? "Backspace" : (k.length === 1) ? k : "Enter";
      handleKey(key);
    }
    function handleKey(key) {
      if (gameOver || isAnimating) return;
      if (key === "Enter") { submitGuess(); return; }
      if (key === "Backspace") { backspace(); return; }
      if (/^[a-zA-Z]$/.test(key)) { keypressLetter(key); return; }
    }
    function keypressLetter(k) {
      if (currentCol >= COLS) return;
      grid[currentRow][currentCol] = k.toLowerCase();
      currentCol++;
      renderBoard();
    }
    function backspace() {
      if (currentCol > 0) {
        currentCol--;
        grid[currentRow][currentCol] = "";
        renderBoard();
      }
    }
    function submitGuess() {
      if (currentCol < COLS) {
        showToast("글자가 부족해요.");
        shakeRow(currentRow);
        return;
      }
      const guess = grid[currentRow].join("");
      if (!VALID_GUESSES.includes(guess.toLowerCase())) {
        showToast("사전에 없는 단어예요.");
        shakeRow(currentRow);
        return;
      }
      
      const evalResult = evaluateGuess(guess, answer);
      statuses[currentRow] = evalResult;
      isAnimating = true;

      animateReveal(currentRow, () => {
        // 애니메이션 완료 후 실행될 로직
        updateKeyboardState(guess, evalResult);
        renderKeyboard();

        if (guess === answer) {
          gameOver = true;
          showToast("정답! 잘했어요 🎉", 1500);
        } else {
          currentRow++;
          currentCol = 0;
          if (currentRow >= ROWS) {
            gameOver = true;
            setAnswerBadge(true);
            showToast(`실패! 정답은 ${answer.toUpperCase()}`, 1800);
          }
        }
        isAnimating = false;
        saveState();
      });
    }
    function rankStatus(s) {
      return s === "absent" ? 1 : s === "present" ? 2 : s === "correct" ? 3 : 0;
    }
    function evaluateGuess(guess, ans) {
      const result = Array(COLS).fill("absent");
      const counts = {};
      for (const ch of ans) { counts[ch] = (counts[ch] || 0) + 1; }
      
      for (let i = 0; i < COLS; i++) {
        if (guess[i] === ans[i]) {
          result[i] = "correct";
          counts[guess[i]]--;
        }
      }
      for (let i = 0; i < COLS; i++) {
        if (result[i] === "correct") continue;
        const g = guess[i];
        if (counts[g] > 0) {
          result[i] = "present";
          counts[g]--;
        }
      }
      return result;
    }
    function updateKeyboardState(guess, tiles) {
        for (let i = 0; i < COLS; i++) {
            const l = guess[i];
            const s = tiles[i];
            const prev = keyboardState[l];
            if (!prev || rankStatus(s) > rankStatus(prev)) {
                keyboardState[l] = s;
            }
        }
    }
    function animateReveal(rowIndex, onDone) {
      const rowStatuses = statuses[rowIndex];
      for (let c = 0; c < COLS; c++) {
        const tile = document.getElementById(`tile-${rowIndex}-${c}`);
        setTimeout(() => {
          tile.classList.add("reveal");
          tile.classList.add(rowStatuses[c]);
          // 접근성: 상태 변경 즉시 알림
          const statusLabel = rowStatuses[c] === "correct" ? "정답 위치" : rowStatuses[c] === "present" ? "다른 위치에 있음" : "단어에 없음";
          tile.setAttribute("aria-label", tile.getAttribute('aria-label').replace(/비어있음$/, statusLabel));

          if (c === COLS - 1) {
            setTimeout(onDone, 650); // 모든 타일 애니메이션이 끝난 후 콜백 실행
          }
        }, c * 320);
      }
    }
    function shareResult() {
      const lines = [];
      for (let r = 0; r < ROWS; r++) {
        const row = statuses[r];
        if (row.every(s => !s)) break;
        lines.push(row.map(s => s === "correct" ? "🟩" : s === "present" ? "🟨" : "⬛").join(""));
      }
      if (lines.length === 0) {
        showToast("공유할 결과가 없어요.");
        return;
      }
      const modeLabel = modeEl.value === "daily" ? "일일" : "랜덤";
      const tries = gameOver && grid[currentRow-1]?.join('') === answer ? currentRow : "X";
      const header = `Wordle 클론 (${modeLabel}) ${tries}/${ROWS}`;
      const text = [header, ...lines].join("\n");
      
      navigator.clipboard.writeText(text).then(() => {
        showToast("결과가 클립보드에 복사되었어요.");
      }).catch(() => {
        showToast("클립보드 복사에 실패했어요.");
      });
    }

    // ====== 이벤트 리스너 ======
    document.addEventListener("keydown", (e) => {
      if (e.isComposing || e.key === 'Process') return;
      handleKey(e.key);
    });
    newBtn.addEventListener("click", () => {
      if(modeEl.value === 'daily') localStorage.removeItem(STORAGE_KEY_PREFIX + getTodayKey());
      newGame();
    });
    shareBtn.addEventListener("click", shareResult);
    revealBtn.addEventListener("click", () => {
      if (gameOver) {
        setAnswerBadge(true);
        return;
      }
      if (!revealConfirm) {
        revealConfirm = true;
        showToast("정말로 보시겠어요? 한 번 더 클릭하세요.", 2000);
        setTimeout(() => { revealConfirm = false; }, 2000);
      } else {
        setAnswerBadge(true);
        gameOver = true;
        revealConfirm = false;
        showToast("정답이 공개되었어요.");
      }
    });
    modeEl.addEventListener("change", newGame);

    // ====== 초기화 ======
    buildBoard();
    buildKeyboard();
    newGame();

  </script>
</body>
</html>